@use 'sass:math';

.c-slider {
    position: relative;

    &[data-dots='false'] {
        padding-bottom: 0;
    }

    &__viewport {
        overflow: hidden;
    }

    &__track {
        display: flex;
        overflow-x: auto;
        margin-top: 0;

        > * {
            flex: 0 0 100%;
        }
    }

    &[data-init] &__track {
        overflow-x: visible;
    }

    @for $i from 2 through 6 {
        &[data-slides-to-show='#{$i}'] &__track > * {
            flex: 0 0 #{math.div(100%, $i)};
        }
    }

    &__skip-btn {
        --transition-duration: 450ms;

        position: absolute;
        opacity: 0;
        left: 0;
        background-color: #fff;
        padding: 1rem;
        transition:
            opacity var(--transition-duration) ease-out,
            transform var(--transition-duration) ease-out;
        z-index: 20;
        pointer-events: none;

        @media (prefers-reduced-motion: reduce) {
            transition: none;
        }

        &:focus-visible {
            opacity: 1;
            pointer-events: auto;
        }

        &.focus-visible {
            opacity: 1;
            pointer-events: auto;
        }

        &:first-child {
            top: 0;
        }

        &:first-child:focus-visible {
            transform: translateY(-100%);
        }

        &:first-child.focus-visible {
            transform: translateY(-100%);
        }

        &:last-child {
            bottom: 0;
        }

        &:last-child:focus-visible {
            transform: translateY(100%);
        }

        &:last-child.focus-visible {
            transform: translateY(100%);
        }
    }

    &__dots {
        display: flex;
        gap: 8px;
    }

    &__dot {
        --color: rgba(0, 0, 0, 0.25);

        position: relative;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        transition: color 400ms ease-out;
        background-color: var(--color);
        color: transparent;

        &[data-active] {
            --color: rebeccapurple;
        }

        .th-trentside &[data-active] {
            --color: #eff2fb;
        }

        &:hover {
            --color: #148592;
        }

        &.focus-visible {
            outline: 2px solid var(--color);
        }

        &:focus-visible {
            outline: 2px solid var(--color);
        }
    }

    &__controls {
        display: flex;
        align-items: center;
        color: rebeccapurple;
        gap: 16px;
    }

    &[data-align='center'] &__controls {
        justify-content: center;
    }

    &[data-background='dark'] &__controls {
        color: white;
    }

    &__controls &__dots {
        position: static;
    }

    &__arrow {
        z-index: 1;
        color: inherit;
        padding: 0;
        background-color: transparent;
        width: 48px;
        height: 48px;

        svg {
            width: 48px;
            height: 48px;
        }
    }
}
